CREATE DATABASE ecommerce;
USE ecommerce;

-- Table: customer
CREATE TABLE customer (
    customerID INT PRIMARY KEY AUTO_INCREMENT,
    customerName VARCHAR(255) NOT NULL,
    customerEmail VARCHAR(255) UNIQUE NOT NULL,
    customerTel VARCHAR(20),
    customerPassword VARCHAR(255)
);

-- Table: user
CREATE TABLE user (
    userID INT PRIMARY KEY AUTO_INCREMENT,
    userName VARCHAR(255) NOT NULL,
    userEmail VARCHAR(255) UNIQUE NOT NULL,
    userPassword VARCHAR(255) NOT NULL
);

-- Table: payment
CREATE TABLE payment (
    paymentID INT PRIMARY KEY AUTO_INCREMENT,
    paymentType VARCHAR(50) NOT NULL,
    total DECIMAL(10, 2) NOT NULL
);

-- Table: orders
CREATE TABLE orders (
    orderID INT PRIMARY KEY AUTO_INCREMENT,
    orderDate DATE NOT NULL,
    customerID INT NOT NULL,
    paymentID INT NOT NULL,
    FOREIGN KEY (customerID) REFERENCES customer(customerID) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (paymentID) REFERENCES payment(paymentID) ON DELETE CASCADE ON UPDATE CASCADE
);

-- Table: category
CREATE TABLE category (
    categoryID INT PRIMARY KEY AUTO_INCREMENT,
    category VARCHAR(255) NOT NULL
);

-- Table: categoryImage
CREATE TABLE categoryImage (
    categoryImageID INT PRIMARY KEY AUTO_INCREMENT,
    categoryID INT NOT NULL,
    imageFileName VARCHAR(255),
    FOREIGN KEY (categoryID) REFERENCES category(categoryID) ON DELETE CASCADE ON UPDATE CASCADE
);

-- Table: product
CREATE TABLE product (
    productID INT PRIMARY KEY AUTO_INCREMENT,
    productName VARCHAR(255) NOT NULL,
    unitPrice DECIMAL(10, 2) NOT NULL,
    productDescription TEXT,
    tagLine VARCHAR(200) NOT NULL,
    categoryID INT NOT NULL,
    qtyOnHand INT NOT NULL,
    FOREIGN KEY (categoryID) REFERENCES category(categoryID) ON DELETE CASCADE ON UPDATE CASCADE
);



-- Table: productColor
CREATE TABLE productColor (
    productColorID INT PRIMARY KEY AUTO_INCREMENT,
    productID INT NOT NULL,
    colorName VARCHAR(50) NOT NULL,
    FOREIGN KEY (productID) REFERENCES product(productID) ON DELETE CASCADE ON UPDATE CASCADE
);

-- Table: productImage
CREATE TABLE productImage (
    productImageID INT PRIMARY KEY AUTO_INCREMENT,
    productID INT NOT NULL,
    imageFileName VARCHAR(255),
    FOREIGN KEY (productID) REFERENCES product(productID) ON DELETE CASCADE ON UPDATE CASCADE
);

-- Table: productStorage
CREATE TABLE productStorage (
    productStorageID INT PRIMARY KEY AUTO_INCREMENT,
    productID INT NOT NULL,
    capacity VARCHAR(50) NOT NULL,
    FOREIGN KEY (productID) REFERENCES product(productID) ON DELETE CASCADE ON UPDATE CASCADE
);


-- Table: cart
CREATE TABLE cart (
    cartID INT PRIMARY KEY AUTO_INCREMENT,
    customerID INT NOT NULL,
    productID INT NOT NULL,
    colorName VARCHAR(50),
    capacity VARCHAR(50),
    qty INT NOT NULL,
    price DECIMAL(10, 2) NOT NULL,
    FOREIGN KEY (customerID) REFERENCES customer(customerID) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (productID) REFERENCES product(productID) ON DELETE CASCADE ON UPDATE CASCADE
);


-- Table: orderDetails
CREATE TABLE orderDetails (
    orderID INT NOT NULL,
    productID INT NOT NULL,
    price DECIMAL(10, 2) NOT NULL,
    qty INT NOT NULL,
    colorName VARCHAR(50),
    capacity VARCHAR(50),
    PRIMARY KEY (orderID, productID),
    FOREIGN KEY (orderID) REFERENCES orders(orderID) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (productID) REFERENCES product(productID) ON DELETE CASCADE ON UPDATE CASCADE
);
